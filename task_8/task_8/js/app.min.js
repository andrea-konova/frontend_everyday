(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{const e=document.querySelector(".timer__counter"),t=document.querySelector(".buttons__block"),o=document.querySelector(".fonts-buttons"),l=document.querySelector(".color-buttons"),n=document.querySelector(".timer__path-remaining"),c=document.querySelector(".popup__button"),a=document.querySelector(".timer__button"),r=document.getElementById("pomodoro"),u=document.getElementById("short-break"),s=document.getElementById("long-break");let d,m,g=60*r.value,i=60*u.value,p=60*s.value,S=0,b=g,h=0,v=0,y=0,k=null,I="KumbhSans",f="#F87070",A=!1;const q=()=>{localStorage.setItem("timePassed",S)},L=()=>{S=null!==localStorage.getItem("timePassed")?Number(localStorage.getItem("timePassed")):0},T=t.querySelectorAll("input"),_=()=>{for(let e=0;e<T.length;e++)null!==localStorage.getItem("activeTab")&&(h=Number(localStorage.getItem("activeTab"))),T[h].checked=!0},C=o.querySelectorAll("input"),E=l.querySelectorAll("input"),w=e=>{let t=Math.floor(e/60),o=e%60;return t<10&&(t=`0${t}`),o<10&&(o=`0${o}`),`${t}:${o}`},x=()=>{clearInterval(k),A=!1,a.textContent="start"},B=()=>{A?x():(k=setInterval((()=>{S=S+=1,d=b-S,m=w(d),e.textContent=m,(()=>{const e=`${(283*(()=>{const e=d/b;return e-1/b*(1-e)})()).toFixed(0)} 283`;n.setAttribute("stroke-dasharray",e)})(),q(),0===d&&(x(),F(),a.textContent="restart",S=0)}),1e3),A=!0,a.textContent="pause")},F=()=>{let e=new Audio;e.src="./files/timer-bell.mp3",e.autoplay=!0},R=()=>{let e=new Audio;e.src="./files/mouse_click_06.wav",e.autoplay=!0},P=t=>{(t=>{t<=0?alert("Пожалуйства введите время в минутах > 0"):(b=t,e.textContent=w(b),S=0)})(t),x(),a.textContent="start",A=!1},$=()=>{switch(g=60*r.value,i=60*u.value,p=60*s.value,_(),document.querySelector("input:checked + label.label").textContent){case"pomodoro":P(g);break;case"short break":P(i);break;case"long break":P(p)}},D=e=>{document.querySelector("html").style.fontFamily=`"${e}", sans-serif`},N=e=>{document.documentElement.style.setProperty("--color-1",e)};e.textContent=m,t.addEventListener("click",(e=>{let t=e.target;R(),t.closest("#button-1")?P(g):t.closest("#button-2")?P(i):t.closest("#button-3")&&P(p),(()=>{for(let e=0;e<T.length;e++)T[e].checked&&(h=e,localStorage.setItem("activeTab",h))})(),S=0,q()})),o.addEventListener("click",(e=>{let t=e.target;R(),t.closest("#fonts-button-1")?I="KumbhSans":t.closest("#fonts-button-2")?I="RobotoSlab":t.closest("#fonts-button-3")&&(I="SpaceMono")})),l.addEventListener("click",(e=>{let t=e.target;R(),t.closest("#color-button-1")?f="#F87070":t.closest("#color-button-2")?f="#70F3F8":t.closest("#color-button-3")&&(f="#D881F8")})),a.addEventListener("click",(()=>{R(),B()})),c.addEventListener("click",(()=>{R(),$(),D(I),N(f),localStorage.setItem("fontTheme",I),localStorage.setItem("colorTheme",f),localStorage.setItem("pomodoro",r.value),localStorage.setItem("shortBreak",u.value),localStorage.setItem("longBreak",s.value),(()=>{for(let e=0;e<C.length;e++)C[e].checked&&(v=e,localStorage.setItem("activeTabFont",v))})(),(()=>{for(let e=0;e<E.length;e++)E[e].checked&&(y=e,localStorage.setItem("activeTabColor",y))})()})),document.addEventListener("DOMContentLoaded",(()=>{null!==localStorage.getItem("fontTheme")&&(I=localStorage.getItem("fontTheme")),D(I),null!==localStorage.getItem("colorTheme")&&(f=localStorage.getItem("colorTheme")),N(f),null!==localStorage.getItem("pomodoro")?r.value=localStorage.getItem("pomodoro"):r.value=r.value,null!==localStorage.getItem("shortBreak")?u.value=localStorage.getItem("shortBreak"):u.value=u.value,null!==localStorage.getItem("longBreak")?s.value=localStorage.getItem("longBreak"):s.value=s.value,$(),L(),d=b-S,m=w(d),e.textContent=m,L(),_(),(()=>{for(let e=0;e<C.length;e++)null!==localStorage.getItem("activeTabFont")&&(v=Number(localStorage.getItem("activeTabFont"))),C[v].checked=!0})(),(()=>{for(let e=0;e<E.length;e++)null!==localStorage.getItem("activeTabColor")&&(y=Number(localStorage.getItem("activeTabColor"))),E[y].checked=!0})()}))})(),(()=>{const e=document.querySelectorAll(".popup__link"),t=document.querySelectorAll(".close-popup"),o=document.querySelectorAll(".lock-padding"),l=document.querySelector(".popup__button"),n=document.querySelector("body");let c=!0;if(e.length>0)for(let t=0;t<e.length;t++){const o=e[t];o.addEventListener("click",(e=>{const t=o.getAttribute("href").replace("#",""),l=document.getElementById(t);a(l),e.preventDefault()}))}if(t.length>0)for(let e=0;e<t.length;e++){const o=t[e];o.addEventListener("click",(e=>{r(o.closest(".popup")),e.preventDefault()}))}const a=e=>{if(e&&c){const t=document.querySelector(".popup.open");t?r(t,!1):u(),e.classList.add("open"),e.addEventListener("click",(e=>{e.target.closest(".popup__content")||r(e.target.closest(".popup"))}))}},r=(e,t=!0)=>{c&&(e.classList.remove("open"),t&&s())},u=()=>{const e=window.innerWidth-document.querySelector("body").offsetWidth+"px";if(o.length>0)for(let t=0;t<o.length;t++)o[t].style.paddingRight=e;n.style.paddingRight=e,n.classList.add("lock"),c=!1,setTimeout((()=>{c=!0}),800)},s=()=>{setTimeout((()=>{if(o.length>0)for(let e=0;e<o.length;e++)o[e].style.paddingRight="0px";n.style.paddingRight="0px",n.classList.remove("lock")}),800),c=!1,setTimeout((()=>{c=!0}),800)};document.addEventListener("keydown",(e=>{if(27===e.which){const e=document.querySelector(".popup.open");r(e)}})),l.addEventListener("click",(()=>{const e=document.querySelector(".popup.open");r(e)}))})()})();