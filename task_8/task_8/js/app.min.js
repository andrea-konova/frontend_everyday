(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{const e=document.querySelector(".timer__counter"),t=document.querySelector(".buttons__block"),o=document.querySelector(".fonts-buttons"),l=document.querySelector(".color-buttons"),n=document.querySelector(".timer__path-remaining"),c=document.querySelector(".popup__button"),r=document.querySelector(".timer__button"),a=document.getElementById("pomodoro"),s=document.getElementById("short-break"),u=document.getElementById("long-break");let d,m=60*a.value,i=60*s.value,g=60*u.value,p=0,h=m,b=null,S="KumbhSans",v="#F87070",y=!1;const f=e=>{let t=Math.floor(e/60),o=e%60;return t<10&&(t=`0${t}`),o<10&&(o=`0${o}`),`${t}:${o}`},k=()=>{clearInterval(b),y=!1,r.textContent="start"},I=()=>{y?k():(b=setInterval((()=>{p=p+=1,d=h-p,e.textContent=f(d),(()=>{const e=`${(283*(()=>{const e=d/h;return e-1/h*(1-e)})()).toFixed(0)} 283`;n.setAttribute("stroke-dasharray",e)})(),0===d&&(k(),A(),r.textContent="restart",p=0)}),1e3),y=!0,r.textContent="pause")},A=()=>{let e=new Audio;e.src="../files/timer-bell.mp3",e.autoplay=!0},L=()=>{let e=new Audio;e.src="../files/mouse_click_06.wav",e.autoplay=!0},q=t=>{(t=>{t<=0?alert("Пожалуйства введите время в минутах > 0"):(h=t,e.textContent=f(h),p=0)})(t),k(),r.textContent="start",y=!1},E=()=>{switch(m=60*a.value,i=60*s.value,g=60*u.value,document.querySelector("input:checked + label.label").textContent){case"pomodoro":q(m);break;case"short break":q(i);break;case"long break":q(g)}},_=e=>{document.querySelector("html").style.fontFamily=`"${e}", sans-serif`},w=e=>{document.documentElement.style.setProperty("--color-1",e)};e.textContent=f(h),t.addEventListener("click",(e=>{let t=e.target;L(),t.closest("#button-1")?q(m):t.closest("#button-2")?q(i):t.closest("#button-3")&&q(g)})),o.addEventListener("click",(e=>{let t=e.target;L(),t.closest("#fonts-button-1")?S="KumbhSans":t.closest("#fonts-button-2")?S="RobotoSlab":t.closest("#fonts-button-3")&&(S="SpaceMono")})),l.addEventListener("click",(e=>{let t=e.target;L(),t.closest("#color-button-1")?v="#F87070":t.closest("#color-button-2")?v="#70F3F8":t.closest("#color-button-3")&&(v="#D881F8")})),r.addEventListener("click",(()=>{L(),I()})),c.addEventListener("click",(()=>{L(),E(),_(S),w(v),localStorage.setItem("fontTheme",S),localStorage.setItem("colorTheme",v),localStorage.setItem("pomodoro",a.value),localStorage.setItem("shortBreak",s.value),localStorage.setItem("longBreak",u.value)})),document.addEventListener("DOMContentLoaded",(()=>{null!==localStorage.getItem("fontTheme")&&(S=localStorage.getItem("fontTheme")),_(S),null!==localStorage.getItem("colorTheme")&&(v=localStorage.getItem("colorTheme")),w(v),null!==localStorage.getItem("pomodoro")?a.value=localStorage.getItem("pomodoro"):a.value=a.value,null!==localStorage.getItem("shortBreak")?s.value=localStorage.getItem("shortBreak"):s.value=s.value,null!==localStorage.getItem("longBreak")?u.value=localStorage.getItem("longBreak"):u.value=u.value,E()}))})(),(()=>{const e=document.querySelectorAll(".popup__link"),t=document.querySelectorAll(".close-popup"),o=document.querySelectorAll(".lock-padding"),l=document.querySelector("body");let n=!0;if(e.length>0)for(let t=0;t<e.length;t++){const o=e[t];o.addEventListener("click",(e=>{const t=o.getAttribute("href").replace("#",""),l=document.getElementById(t);c(l),e.preventDefault()}))}if(t.length>0)for(let e=0;e<t.length;e++){const o=t[e];o.addEventListener("click",(e=>{r(o.closest(".popup")),e.preventDefault()}))}const c=e=>{if(e&&n){const t=document.querySelector(".popup.open");t?r(t,!1):a(),e.classList.add("open"),e.addEventListener("click",(e=>{e.target.closest(".popup__content")||r(e.target.closest(".popup"))}))}},r=(e,t=!0)=>{n&&(e.classList.remove("open"),t&&s())},a=()=>{const e=window.innerWidth-document.querySelector("body").offsetWidth+"px";if(o.length>0)for(let t=0;t<o.length;t++)o[t].style.paddingRight=e;l.style.paddingRight=e,l.classList.add("lock"),n=!1,setTimeout((()=>{n=!0}),800)},s=()=>{setTimeout((()=>{if(o.length>0)for(let e=0;e<o.length;e++)o[e].style.paddingRight="0px";l.style.paddingRight="0px",l.classList.remove("lock")}),800),n=!1,setTimeout((()=>{n=!0}),800)};document.addEventListener("keydown",(e=>{if(27===e.which){const e=document.querySelector(".popup.open");r(e)}}))})()})();